(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{ekgB:function(e,a,s){"use strict";s.r(a),s.d(a,"GameModule",function(){return p});var t=s("ofXK"),r=s("tyNb"),i=s("fXoL"),c=s("2Vo4");let n=(()=>{class e{constructor(){this.player1={id:1,score:0},this.player2={id:2,score:0},this.currentPlayer=new c.a(this.player1)}togglePlayer(){this.currentPlayer.next(this.currentPlayer.value===this.player1?this.player2:this.player1)}resetScores(){this.player1.score=0,this.player2.score=0,this.currentPlayer.next(this.player1)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=i.Ab({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=s("LRne");let l=(()=>{class e{constructor(){this.availableCards=[{id:1,revealed:!1,imageUrl:"assets/images/arrow.svg",cardName:"Flecha"},{id:2,revealed:!1,imageUrl:"assets/images/brush.svg",cardName:"Pincel"},{id:3,revealed:!1,imageUrl:"assets/images/camera.svg",cardName:"C\xe1mara"},{id:4,revealed:!1,imageUrl:"assets/images/fish.svg",cardName:"Pez"},{id:5,revealed:!1,imageUrl:"assets/images/laptop.svg",cardName:"Laptop"},{id:6,revealed:!1,imageUrl:"assets/images/lightbulb.svg",cardName:"L\xe1mpara"},{id:7,revealed:!1,imageUrl:"assets/images/mortarboard-hat.svg",cardName:"Bonete"},{id:8,revealed:!1,imageUrl:"assets/images/owl.svg",cardName:"Buho"},{id:9,revealed:!1,imageUrl:"assets/images/popsicles.svg",cardName:"Helados"},{id:10,revealed:!1,imageUrl:"assets/images/flower.svg",cardName:"Flor"}],this.cards=[Object.assign({},this.availableCards[0]),Object.assign({},this.availableCards[1]),Object.assign({},this.availableCards[2]),Object.assign({},this.availableCards[3]),Object.assign({},this.availableCards[4]),Object.assign({},this.availableCards[5]),Object.assign({},this.availableCards[6]),Object.assign({},this.availableCards[7]),Object.assign({},this.availableCards[8]),Object.assign({},this.availableCards[9]),Object.assign({},this.availableCards[0]),Object.assign({},this.availableCards[1]),Object.assign({},this.availableCards[2]),Object.assign({},this.availableCards[3]),Object.assign({},this.availableCards[4]),Object.assign({},this.availableCards[5]),Object.assign({},this.availableCards[6]),Object.assign({},this.availableCards[7]),Object.assign({},this.availableCards[8]),Object.assign({},this.availableCards[9])]}dealHand(){const e=[],a=[];return this.availableCards.forEach(s=>{let t=Math.floor(20*Math.random());for(;a.includes(t);)t=Math.floor(20*Math.random());a.push(t);let r=Math.floor(20*Math.random());for(;a.includes(r);)r=Math.floor(20*Math.random());a.push(r),e[t]=Object.assign({},s),e[r]=Object.assign({},s)}),Object(d.a)(e)}checkRevealed(e){return e.every(e=>!0===e.revealed)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=i.Ab({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function o(e,a){if(1&e&&i.Fb(0,"img",4),2&e){const e=i.Pb(2);i.Qb("src",e.card.imageUrl,i.Tb)("alt",e.card.cardName)}}function b(e,a){if(1&e){const e=i.Ib();i.Hb(0,"button",2),i.Nb("click",function(){return i.Sb(e),i.Pb().reveal()}),i.Vb(1,o,1,2,"img",3),i.Gb()}if(2&e){const e=i.Pb();i.vb(1),i.Qb("ngIf",e.card.revealed)}}let h=(()=>{class e{constructor(){this.disabled=!1,this.selected=new i.n}ngOnInit(){}reveal(){this.disabled||(this.card.revealed=!0,this.selected.emit(this.card.id))}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=i.yb({type:e,selectors:[["app-card"]],inputs:{card:"card",disabled:"disabled"},outputs:{selected:"selected"},decls:2,vars:1,consts:[[1,"card-container"],["class","card-body",3,"click",4,"ngIf"],[1,"card-body",3,"click"],["class","card-image",3,"src","alt",4,"ngIf"],[1,"card-image",3,"src","alt"]],template:function(e,a){1&e&&(i.Hb(0,"div",0),i.Vb(1,b,2,1,"button",1),i.Gb()),2&e&&(i.vb(1),i.Qb("ngIf",a.card))},directives:[t.i],styles:[".card-container[_ngcontent-%COMP%]{background-color:#faebd7;border-radius:1rem;width:5rem;height:6rem}.card-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{height:100%;width:100%;background-color:initial;border:none}.card-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{max-width:4rem;max-height:5rem}"]}),e})();function g(e,a){if(1&e){const e=i.Ib();i.Hb(0,"app-card",9),i.Nb("selected",function(a){return i.Sb(e),i.Pb().checkMatch(a)}),i.Gb()}if(2&e){const e=a.$implicit,s=i.Pb();i.Qb("card",e)("disabled",s.disabled)}}function u(e,a){if(1&e&&(i.Hb(0,"div",10),i.Hb(1,"h1"),i.Wb(2,"El juego ha terminado!"),i.Gb(),i.Hb(3,"p"),i.Wb(4),i.Gb(),i.Gb()),2&e){const e=i.Pb();i.vb(4),i.Xb("Resultado: ",e.gameResult,"")}}const m=[{path:"",component:(()=>{class e{constructor(e,a){this.playerService=e,this.cardsService=a,this.scores=[{id:1,score:0},{id:2,score:0}],this.gameResult=null,this.cards=[],this.timeLeft=10,this.disabled=!1}ngOnInit(){this.playerService.currentPlayer.subscribe(e=>this.currentPlayer=e),this.cardsService.dealHand().subscribe(e=>this.cards=e),setInterval(()=>this.timeControl(),1e3)}checkMatch(e){if(this.disabled=!0,this.previouslySelected){const a=this.previouslySelected===e;setTimeout(()=>{a||this.cards.filter(a=>a.id===e||a.id===this.previouslySelected).forEach(e=>e.revealed=!1),this.endTurn(a),this.previouslySelected=null,this.disabled=!1},1e3)}else this.previouslySelected=e,this.disabled=!1}endTurn(e){e?(this.currentPlayer.score+=1,this.scores.find(e=>e.id===this.currentPlayer.id).score+=1):this.playerService.togglePlayer(),this.timeLeft=10,this.cardsService.checkRevealed(this.cards)&&this.endGame()}reset(){this.scores.forEach(e=>e.score=0),this.playerService.resetScores(),this.cards.forEach(e=>e.revealed=!1),this.gameResult=null}endGame(){this.gameResult=this.scores[0].score===this.scores[1].score?"Es un empate!":this.scores[0].score>this.scores[1].score?`Ha ganado el Jugador 1 con ${this.scores[0].score} puntos!`:`Ha ganado el Jugador 2 con ${this.scores[1].score} puntos!`,this.timeLeft=0}timeControl(){this.timeLeft<=0?this.endTurn(!1):this.timeLeft-=1}}return e.\u0275fac=function(a){return new(a||e)(i.Eb(n),i.Eb(l))},e.\u0275cmp=i.yb({type:e,selectors:[["app-board"]],decls:19,vars:7,consts:[[1,"board-container"],[1,"players-turn"],[1,"main-board"],[3,"card","disabled","selected",4,"ngFor","ngForOf"],["class","end-game-modal",4,"ngIf"],[1,"score"],[1,"score__player-one"],[1,"score__player-two"],[3,"click"],[3,"card","disabled","selected"],[1,"end-game-modal"]],template:function(e,a){1&e&&(i.Hb(0,"div",0),i.Hb(1,"h1",1),i.Wb(2),i.Gb(),i.Hb(3,"div",2),i.Vb(4,g,1,2,"app-card",3),i.Vb(5,u,5,1,"div",4),i.Gb(),i.Hb(6,"p"),i.Wb(7),i.Gb(),i.Hb(8,"div",5),i.Hb(9,"h2"),i.Wb(10,"Puntajes"),i.Gb(),i.Hb(11,"div",6),i.Hb(12,"p"),i.Wb(13),i.Gb(),i.Gb(),i.Hb(14,"div",7),i.Hb(15,"p"),i.Wb(16),i.Gb(),i.Gb(),i.Gb(),i.Hb(17,"button",8),i.Nb("click",function(){return a.reset()}),i.Wb(18,"Reiniciar"),i.Gb(),i.Gb()),2&e&&(i.vb(2),i.Xb("Turno de jugador ",a.currentPlayer.id,""),i.vb(2),i.Qb("ngForOf",a.cards),i.vb(1),i.Qb("ngIf",a.gameResult),i.vb(2),i.Yb("Tiempo restante: ",a.timeLeft," segundo",1!==a.timeLeft?"s":"","."),i.vb(6),i.Xb("Jugador 1: ",a.scores[0].score,""),i.vb(3),i.Xb("Jugador 2: ",a.scores[1].score,""))},directives:[t.h,t.i,h],styles:[".main-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,5.1rem);grid-template-rows:repeat(5,6.1rem);width:21rem}.end-game-modal[_ngcontent-%COMP%]{position:absolute;background:rgba(240,248,255,.527);width:21rem;height:31rem;display:flex;flex-direction:column;justify-content:center;align-items:center}.disabled[_ngcontent-%COMP%]{cursor:not-allowed}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=i.Cb({type:e}),e.\u0275inj=i.Bb({factory:function(a){return new(a||e)},imports:[[r.a.forChild(m)],r.a]}),e})(),p=(()=>{class e{}return e.\u0275mod=i.Cb({type:e}),e.\u0275inj=i.Bb({factory:function(a){return new(a||e)},providers:[n],imports:[[t.b,v]]}),e})()}}]);